{% load static %}
{% load tags %}

<head>
    <link rel="icon" type="image/x-icon" href="{% static 'ytlogo.ico' %}">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
     <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.1/dist/jquery.min.js"></script>

    <script type="text/javascript">
        const CSRF_TOKEN = "{{ csrf_token }}";
    </script>

    <script src="{% static 'js/app.js' %}"></script>

    {% block scripts %}

    {% endblock %}
</head>
<body>
    <nav id="view-selector">
        <div id="sandwich-icon" data-sidebar="#sidebar-left">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
        </div>
        {% if request.path == '/' %}
            <h2 class="head">Yawning Titan</h2>
        {% else %}
            <a href="{% url 'home' %}" class="head">Yawning Titan</a>
        {% endif %}
    </nav>
    <div id="window-container">
        <div id="toolbar">
            <div id="game-mode-set" class="stage" data-toggle="tooltip" data-placement="right" title="Game mode config incomplete">
                <i class="bi bi-gear"></i>
                <i class="bi bi-gear-fill"></i>
            </div>
            <div class="stage" data-toggle="tooltip" data-placement="right" title="Network config incomplete">
                <i class="bi bi-diagram-2"></i>
                <i class="bi bi-diagram-2-fill"></i>
            </div>
            <div class="stage" data-toggle="tooltip" data-placement="right" title="Run config incomplete">
                <i class="bi bi-collection-play"></i>
                <i class="bi bi-collection-play-fill"></i>
            </div>
            <div class="stage" data-toggle="tooltip" data-placement="right" title="Run game">
                <i class="bi bi-play"></i>
                <i class="bi bi-play-fill"></i>
            </div>
        </div>
        <div id="window">
            <div id="sidebar-left">
                <div id="nav-accordion" class="accordion">
                    {% for button_name, links in sidebar.items %}
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="{{button_name|to_id}}-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#{{button_name|to_id}}-links" aria-expanded="false" aria-controls="images-list">
                                {{button_name}}
                            </button>
                        </h2>
                        <div id="{{button_name|to_id}}-links" class="accordion-collapse collapse" aria-labelledby="{{button_name|to_id}}-header" data-bs-parent="#nav-accordion">
                            <div class="accordion-body list">
                            {% for link in links %}
                                <a class="wide" href="{{link|get_url}}">{{link}}</a>
                            {% endfor %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% block sidebar %}

                {% endblock %}
            </div>
            <div id="main">
                {% block main %}

                {% endblock %}
            </div>
        </div>
    </div>
    <div id="mask" class="hidden">
        {% block dialogues %}

        {% endblock %}
    </div>
</body>

<style>
    :root{
        --primary: #00A86B;
        --primary-light: #A8E4A0;
        --light: #323233;
        --mid: #252526;
        --dark: #1e1e1e;

        --text-superlight: #fff;
        --text-light: #999;
        --text-mid: #888;

        --increment: 5px;
        --padding: 50px;
    }
    body{
        width: 100vw;
        height: 100vh;
        display: flex;
        flex-direction: column;
        background-color: var(--light);
        color: #666;
        line-height: auto;
        position: relative;
    }
    input:checked{
        background-color: var(--primary) !important;
    }
    input[type="checkbox"]:focus:checked{
        background-color: var(--primary) !important;
    }
    input:focus{
        background-color: var(--dark) !important;
        color: var(--text-light) !important;
    }
    input[type='search']{
        background-color: var(--mid);
        color: var(--text-light);
    }
    input[type='search']:focus{
        background-color: var(--mid);
        color: var(--text-light);
    }
    input[type='search'].rounded{
        border-top-right-radius:0 !important;
        border-bottom-right-radius:0 !important;
    }
    option:hover{
        background-color: var(--primary-light);
    }

    /* base elements */
    #view-selector{
        width: 100%;
        height: var(--padding);
        display: flex;
        align-items: center;
        justify-content: flex-start;
        background-color: var(--light);
        border-bottom: 1px solid var(--text-mid);
    }
    #toolbar{
        width: var(--padding);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background-color: var(--light);
        border-right: 1px solid var(--text-mid);
    }
    #toolbar>*{
        font-size: 2rem;
        margin-top: calc(var(--increment)*3);
        margin-bottom: calc(var(--increment)*3);
        color: var(--text-light);
    }
    #window-container{
        flex: 1;
        display: flex;
        flex-direction: row;
        width: 100%;
    }
    #window{
        flex: 1;
        display: flex;
        flex-direction: row;
        width: 100%;
        overflow: hidden;
    }
    #sidebar-left{
        width: 700px;
        height: 100%;
        display: flex;
        background-color: var(--mid);
        transition: all 0.8s ease;
        margin-left: -700px;
        /* transform: translate(-700px, 0); */
    }
    #sidebar-left.open{

        margin-left: 0px;
    }
    #main{
        position: relative;
        flex: 1;
        height: 100%;
        padding: var(--padding);
        overflow-y: auto;
    }

    #center-container{
        position: absolute;
        top: 50%;
        left: 50%;
        padding: 30px;
        background-color: var(--mid);
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        border: 1px solid var(--text-light);
        border-radius: .25rem;
        transform: translate(-50%, -50%);
    }
    #center-container.small{
        width: 500px;
        height: 500px;
    }
    #center-container.stretch{
        width: 1000px;
        min-height: 60%;
        max-height: 100%;
    }

    .icon{
        border-radius: 50%;
        background-color: var(--light);
        margin-left: var(--increment);
        padding: .5rem;
    }

    /* dialogue boxes */
    #mask{
        position: absolute;
        top: 50%;
        left: 50%;
        height: 100%;
        width: 100%;
        transform: translate(-50%,-50%);
    }
    .dialogue-center{
        position: absolute;
        top: 50%;
        left: 50%;
        width: 500px;
        height: 500px;
        padding: calc(2*var(--increment));
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        background-color: var(--light);
        border-radius: .5rem;
        transform: translate(-50%,-50%);
    }
    .dialogue-center>p{
        flex: 1;
    }
    .dialogue-center>h3{
        color: var(--text-light);
    }

    /* toolbar */
    #toolbar>.stage>i:last-child{
        display: none;
        color: var(--primary);
    }
    #toolbar>.stage>i:first-child{
        display: block;
    }
    #toolbar>.stage.complete>i:last-child{
        display: block;
    }
    #toolbar>.stage.complete>i:first-child{
        display: none;
    }

    /* text styling */
    .head{
        font-size: 2.5rem;
        color: var(--primary);
        text-decoration: none;
    }
    .head:hover{
        color: var(--primary);
    }

    /* accordion */
    .accordion{
        width:100%;
        max-height: 100%;
        margin: var(--increment);
    }
    .accordion-item,.accordion-header,.accordion-button{
        background-color: var(--light);
        color: var(--text-light);
        border: none;
    }
    .accordion-button:not(.collapsed){
        background-color: var(--primary);
        color: var(--text-superlight);
    }
    .accordion-button.collapsed::after {
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23888'%3e%3cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e");
    }
    .accordion-body{
        background-color: var(--mid);
    }

    /* helpers */
    .hidden{
        display: none !important;
    }
    .clear{
        background-color: transparent !important;
        border: none !important;
    }
    .blur{
        filter: blur(5px);
    }
    .btn-primary{
        background-color: var(--primary);
        border-color: var(--primary);
        color: var(--text-superlight) !important;
    }
    .btn{
        color: var(--text-light);
    }

    .list{
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
    }
    .list>a{
        text-decoration: none;
        color: var(--text-mid);
        cursor: pointer;
        font-size: 1rem;
        height: 2rem;
    }
    .list>a:hover{
        border-bottom: 1px solid var(--text-mid);
        color: var(--primary-light);
    }
    .el-row{
        width: 100%;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
    }

    /* animated sandwich */
    #sandwich-icon{
        width: 30px;
        height: 22px;
        margin-left: var(--increment);
        margin-right: var(--increment);
        position: relative;
        -webkit-transform: rotate(0deg);
        -moz-transform: rotate(0deg);
        -o-transform: rotate(0deg);
        transform: rotate(0deg);
        -webkit-transition: .5s ease-in-out;
        -moz-transition: .5s ease-in-out;
        -o-transition: .5s ease-in-out;
        transition: .5s ease-in-out;
        cursor: pointer;
    }

    #sandwich-icon>span{
        display: block;
        position: absolute;
        height: 4px;
        width: 100%;
        background: var(--text-mid);
        border-radius: 9px;
        opacity: 1;
        left: 0;
        -webkit-transform: rotate(0deg);
        -moz-transform: rotate(0deg);
        -o-transform: rotate(0deg);
        transform: rotate(0deg);
        -webkit-transition: .25s ease-in-out;
        -moz-transition: .25s ease-in-out;
        -o-transition: .25s ease-in-out;
        transition: .25s ease-in-out;
        }


    #sandwich-icon span:nth-child(1) {
        top: 0px;
    }

    #sandwich-icon span:nth-child(2),#sandwich-icon span:nth-child(3) {
        top: 9px;
    }

    #sandwich-icon span:nth-child(4) {
        top: 18px;
    }

    #sandwich-icon.open span:nth-child(1) {
        top: 9px;
        width: 0%;
        left: 50%;
    }

    #sandwich-icon.open span:nth-child(2) {
        -webkit-transform: rotate(45deg);
        -moz-transform: rotate(45deg);
        -o-transform: rotate(45deg);
        transform: rotate(45deg);
    }

    #sandwich-icon.open span:nth-child(3) {
        -webkit-transform: rotate(-45deg);
        -moz-transform: rotate(-45deg);
        -o-transform: rotate(-45deg);
        transform: rotate(-45deg);
    }

    #sandwich-icon.open span:nth-child(4) {
        top: 9px;
        width: 0%;
        left: 50%;
    }
</style>

{% block style %}
{% endblock %}
